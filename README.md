# Emily

这是一个简单、美丽、友好、全面、已扩展的服务监控设计构想

希望她可以在微服务的设计和使用过程中提供帮助


## 微服务2.0了，依旧没有看到期望的
无论2018年之前，还是ServiceMesh的时代

1. 为什么没有一个简单、友好、全面的设计与监控方案？
2. 为什么devops没有建模、设计的步骤？这永远是创作过程中灵魂。

## 什么是微服务
官方、论坛的内容查了一摞子，没有太多干货，要不是技术实现，要不是抽象概念，不谈也罢。在这里主要谈谈个人构想。

笔者是化工专业出身，这个是前提。连续就职的2个软件公司，期间都对微服务进行过研究，第1个小公司没精力实施，第2个正在准备中。每次，我都会先考虑，微服务到底是什么？给我切实的好处有哪些？最重要的是，**项目搭建成什么程度，才能算真正意义的微服务？**

在研究过程中，随着内容的逐步深入，逐渐联想到一件事情，其实在化工行业的数百年的发展中，微服务早已非常理想地落地了。所以，抛开专业的跨度，我们先来简单讨论下化工行业的实施过程是如何操作的。

###### 第一步，产出工艺流程图和相关文档——架构阶段：

![工艺流程图](https://raw.githubusercontent.com/smyBoy/Emily/master/image/ProcessFlowDiagram.jpg)

###### 以下是一款非专业软件提供的设备内容——现在能了解服务和其原子性了吗？我可以说，这里的设备，大部分都可以直接采购到吗？控制各种参数就可以直接满足不同产品的生产要求！

![设备图](https://raw.githubusercontent.com/smyBoy/Emily/master/image/equipment.png)

###### 第二步，产出更详细的施工图和设备资料——设计阶段：
1. 根据工艺流程、项目产值等，模拟计算，对每台设备、管道进行选型，计算大小、数量等，冷备、热备、多台负载等等都是要计算的。（专业工具里计算模型很多，可以直接选择合适的函数进行估算）
2. 选择控制点和检测仪器
3. 设备编号，很重要。编码能区分设备类型、工段等等
4. 完成施工图，大神都能做3D建模，更甚的包含厂房位置、大门、办公室等等。要考虑的是外部、内部布局,设备如何安放、物料如何运输等等问题
######有条件的会做放大实验——测试验证阶段（技术开发阶段本质上已完成，这对软件开发不太一样）
######实施建厂——项目部署、运行
1. 有条件的会做试运行
2. 大型的企业有监控室，还能控制阀门和设备。出了问题，现场和监控室协同处理，会弄一套呼叫设备用来沟通。

### 重新定义微服务需求
1. 所有服务，包括微服务自身服务，相互解耦，独立，可拔插（如java的datadriver、hibernate，可惜发展到了nosql、es，木有了，估计将来得靠各种转换工具） 
2. 有一套友好、丰富、可控的流程建模和命名规范，并应用于监控和管理（监控界面起码要求模型，不能全是数据和饼状图，没人是尼奥，即使是，架构调整后就不是了）

![监控图](https://raw.githubusercontent.com/smyBoy/Emily/master/image/monitor.JPG)

## Emily内容

1. 通过svg+d3.jd提供一个项目监控页面
2. svg可以产出一个矢量、静态图，这是一个对所有项目角色都友好的技术
3. d3.js可以完成监控数据的动态加载
4. 可扩展在线编辑、特效、控制指令发送等等

#### 问题讨论1：微服务的模型能画出来吗？
在初期实现Emily时，了解到一个忧伤的话题：服务交互是很乱，微服务的模型是画不出来的。那一刹那，我不太了解发生了什么？为什么一个项目带头人可以理直气壮地说不知道项目的数据流，并且当前项目还没有到微服务要求的粒度。

细想一下，首先，在国内，虽然目前大家对UML有了普片的认识，但设计方案基于UML的实践很少（个人实践过并从中获益）。一般都依靠设计文档，通篇流程图相当少。项目整体架构无法被描述或者难以描述，少有人能对复杂一点点的项目有整体认知，严重影响对项目的评估和把控。

其次，目前的软件开发过程对设计的要求相当低，从devops模型和个人实践中了解，几乎没有真正去完善、优化设计过程的实践。设计文档，宏观上还一般会有一个抽象的架构图，微观上就是数据库设计和接口设计的文字描述了（*没有人知道这个游戏吗？一队人站成一排，第一个说一句话，依次传递下去，比较第一个人和最后一个人的信息，结果往往很惊人奥。另外系统信息复杂度，是这个的百倍千倍吧？最严重的是这个问题得不到正视*）。还有设计几乎和运维一样，都在依靠能力和习惯，来处理项目问题。

所以，在实践了一个初级的demo之后，Emily里会再模拟一个微服务项目，演示一种解决方案。

 