<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>电子文档管理</title>
</head>
<body>
<svg viewBox="0 0 1000 400" fill="none" stroke-width="1" stroke="#000" font-size="10">
    <style>
        /* <![CDATA[ */
        text, path {
            stroke-width: 0;

        }

        text {
            fill: blue;
        }

        polyline {
            fill: white;
            stroke: blue;
            stroke-width: 2
        }

        path {
            fill: blue;
        }

        /* ]]> */
    </style>
    <defs>
        <marker id="arrow" markerWidth="10" markerHeight="10" refx="0" refy="2" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,4 L5,2 z"/>
        </marker>
    </defs>
    <g id="collect">
        <rect x="46" y="146" rx="10" width="100" height="60"></rect>
        <rect x="48" y="148" rx="10" width="100" height="60"></rect>
        <rect x="50" y="150" rx="10" width="100" height="60" fill="#aaa"></rect>
        <text x="60" y="160">收集</text>
    </g>
    <g id="collect-db">
        <rect x="46" y="246" width="100" height="60"></rect>
        <rect x="48" y="248" width="100" height="60"></rect>
        <rect x="50" y="250" width="100" height="60" fill="#aaa"></rect>
        <text x="60" y="260">原始材料库</text>
    </g>
    <g id="arrange">
        <rect x="246" y="146" rx="10" width="100" height="60"></rect>
        <rect x="248" y="148" rx="10" width="100" height="60"></rect>
        <rect x="250" y="150" rx="10" width="100" height="60" fill="#aaa"></rect>
        <text x="260" y="160">整理</text>
    </g>
    <g id="fill">
        <rect x="450" y="150" rx="10" width="100" height="60" fill="#aaa"></rect>
        <text x="460" y="160">归档</text>
    </g>
    <g id="file-db">
        <rect x="446" y="246" width="100" height="60"></rect>
        <rect x="448" y="248" width="100" height="60"></rect>
        <rect x="450" y="250" width="100" height="60" fill="#aaa"></rect>
        <text x="460" y="260">档案库</text>
    </g>
    <g id="search">
        <rect x="646" y="146" rx="10" width="100" height="60"></rect>
        <rect x="648" y="148" rx="10" width="100" height="60"></rect>
        <rect x="650" y="150" rx="10" width="100" height="60" fill="#aaa"></rect>
        <text x="660" y="160">检索</text>
    </g>
    <g id="search-db">
        <rect x="646" y="246" width="100" height="60"></rect>
        <rect x="648" y="248" width="100" height="60"></rect>
        <rect x="650" y="250" width="100" height="60" fill="#aaa"></rect>
        <text x="660" y="260">检索库</text>
    </g>
    <polyline points="150,180 240,180" marker-end="url(#arrow)"></polyline>
    <polyline points="350,180 440,180" marker-end="url(#arrow)"></polyline>
    <polyline points="550,180 640,180" marker-end="url(#arrow)"></polyline>
    <polyline points="100,210 100,250" stroke-dasharray="5,5"></polyline>
    <polyline points="500,210 500,250" stroke-dasharray="5,5"></polyline>
    <polyline points="700,210 700,250" stroke-dasharray="5,5"></polyline>
</svg>
</body>
<script src="lib/jquery-3.1.1.min.js"></script>
<script src="lib/d3/d3.min.js"></script>
<script src="lib/utils.js"></script>
<script src="lib/emily.js"></script>
<script src="data/data.js"></script>
<script type="text/javascript">
    var svg = d3.select("svg")
    var formats = [
        {"key": "status", "format": "status:{0}"},
        {"key": "CPU", "format": "CUP:{0}%", "length": 3},
        {"key": "Memory", "format": "Memory:{0}%", "length": 3},
    ]
    var e = new Emily(svg, formats,{"fill": fill})
    $(function () {
        e.load(demo1())
        setInterval(update, 1000)
    })

    function fill(data) {
        return data["status"]
    }

    function update() {
        e.update(demo1())
    }


</script>
</html>